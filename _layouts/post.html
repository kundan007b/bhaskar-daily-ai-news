---
layout: default
---

<article class="post-article">
  <header class="post-head">
    <h1 class="post-title">{{ page.title }}</h1>
    <div class="post-meta">
      <span class="badge">{{ page.category }}</span>
      <span id="reading-time">· </span>
      <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%B %d, %Y" }}</time>
    </div>
    {% if page.image %}
      <figure class="post-figure">
        <img src="{{ page.image | relative_url }}" alt="{{ page.image_alt | default: page.title }}" loading="lazy" decoding="async" />
        {% if page.image_alt %}<figcaption>{{ page.image_alt }}</figcaption>{% endif %}
      </figure>
    {% endif %}
  </header>

  <nav id="toc" class="toc"></nav>

  <section id="content-en" class="post-content">
    {{ content }}
  </section>

  {% if page.body_hi %}
  <hr>
  <section id="content-hi" class="post-content hi">
    {{ page.body_hi | markdownify }}
  </section>
  {% endif %}

  {% if page.keywords %}
  <footer class="post-footer">
    <div class="keywords">
      {% assign tags = page.keywords | split: ',' %}
      {% for t in tags %}
        {% assign tag = t | strip %}
        {% if tag != "" %}<span class="chip">{{ tag }}</span>{% endif %}
      {% endfor %}
    </div>
  </footer>
  {% endif %}
</article>

<script>
  // Reading time (client-side, no plugins)
  (function(){
    const el = document.querySelector(".post-content");
    if(!el) return;
    const text = el.textContent || "";
    const words = text.trim().split(/\s+/).length;
    const mins = Math.max(1, Math.round(words/200));
    const rt = document.getElementById("reading-time");
    if(rt) rt.textContent = `· ${mins} min read · `;
  })();

  // Build TOC from h2/h3
  (function(){
    const area = document.querySelector(".post-content");
    const toc = document.getElementById("toc");
    if(!area || !toc) return;
    const hs = area.querySelectorAll("h2, h3");
    if(!hs.length) return;
    let html = '<div class="toc-title">On this page</div><ul>';
    hs.forEach(h=>{
      const id = h.id || h.textContent.trim().toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");
      h.id = id;
      html += `<li class="${h.tagName==='H3'?'child':''}"><a href="#${id}">${h.textContent}</a></li>`;
    });
    html += '</ul>';
    toc.innerHTML = html;
  })();
</script>
