{%- assign desc = page.description | default: site.description -%}
{%- assign page_title = page.title | default: site.title -%}
{%- assign page_url = page.url | absolute_url -%}
{%- assign page_image = page.image | default: '/assets/images/default-og.jpg' -%}

<!-- Google AdSense Verification -->
<meta name="google-adsense-account" content="ca-pub-7621715019000629">

<!-- Primary Meta Tags -->
<meta name="description" content="{{ desc | strip_html | truncate: 160 }}">
<meta name="keywords" content="{{ page.keywords | default: 'news, bilingual news, India news, technology, business, politics, finance, startups, Hindi news, English news' }}">
<meta name="author" content="KB">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
<meta name="googlebot" content="index, follow">
<meta name="bingbot" content="index, follow">
<link rel="canonical" href="{{ page_url }}">

<!-- Mobile & Viewport -->
<meta name="theme-color" content="#1a73e8">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="{{ site.title }}">

<!-- Geographic Tags -->
<meta name="geo.region" content="IN">
<meta name="geo.placename" content="India">
<meta name="coverage" content="Worldwide">
<meta name="distribution" content="Global">
<meta name="target" content="all">
<meta name="rating" content="General">
<meta name="language" content="English, Hindi">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
<meta property="og:title" content="{{ page_title | escape }}">
<meta property="og:description" content="{{ desc | strip_html | truncate: 200 }}">
<meta property="og:url" content="{{ page_url }}">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:locale" content="en_IN">
<meta property="og:locale:alternate" content="hi_IN">
{%- if page.image -%}
<meta property="og:image" content="{{ site.url }}{{ page_image }}">
<meta property="og:image:secure_url" content="{{ site.url }}{{ page_image }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{{ page.image_alt | default: page_title | escape }}">
<meta property="og:image:type" content="image/jpeg">
{%- endif -%}
{%- if page.date -%}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
<meta property="article:modified_time" content="{{ page.date | date_to_xmlschema }}">
<meta property="article:author" content="{{ site.url }}">
{%- endif -%}
{%- if page.category -%}
<meta property="article:section" content="{{ page.category }}">
<meta property="article:tag" content="{{ page.category }}">
{%- endif -%}
{% if page.keywords %}
{%- assign keywords_array = page.keywords | split: ", " -%}
{%- for keyword in keywords_array limit:5 -%}
<meta property="article:tag" content="{{ keyword }}">
{%- endfor -%}
{% endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ page_title | escape | truncate: 70 }}">
<meta name="twitter:description" content="{{ desc | strip_html | truncate: 200 }}">
<meta name="twitter:site" content="@{{ site.twitter_username | default: 'kbhaskar' }}">
<meta name="twitter:creator" content="@{{ page.twitter_username | default: site.twitter_username | default: 'kbhaskar' }}">
{%- if page.image -%}
<meta name="twitter:image" content="{{ site.url }}{{ page_image }}">
<meta name="twitter:image:alt" content="{{ page.image_alt | default: page_title | escape }}">
{%- endif -%}
<meta name="twitter:domain" content="{{ site.url | replace: 'https://', '' | replace: 'http://', '' }}">

<!-- Language Alternates -->
<link rel="alternate" hreflang="en" href="{{ page_url }}">
<link rel="alternate" hreflang="hi" href="{{ page_url }}?lang=hi">
<link rel="alternate" hreflang="x-default" href="{{ page_url }}">

<!-- Structured Data (JSON-LD) -->
{% if page.layout == 'post' %}
<!-- NewsArticle Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "headline": "{{ page_title | escape }}",
  "alternativeHeadline": "{{ desc | strip_html | escape | truncate: 110 }}",
  "description": "{{ desc | strip_html | escape }}",
  {%- if page.image -%}
  "image": {
    "@type": "ImageObject",
    "url": "{{ site.url }}{{ page_image }}",
    "width": 1200,
    "height": 630,
    "caption": "{{ page.image_alt | default: page_title | escape }}"
  },
  {%- endif -%}
  {%- if page.date -%}
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.date | date_to_xmlschema }}",
  {%- endif -%}
  "inLanguage": ["en-IN", "hi-IN"],
  "articleSection": "{{ page.category | default: 'News' }}",
  {%- if page.keywords -%}
  "keywords": "{{ page.keywords }}",
  {%- endif -%}
  "author": {
    "@type": "Person",
    "name": "KB",
    "url": "{{ site.url }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.url }}/assets/images/logo.png",
      "width": 250,
      "height": 60
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "{{ site.email | default: 'contact@kbhaskar.tech' }}",
      "contactType": "Customer Service",
      "availableLanguage": ["English", "Hindi"]
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ page_url }}"
  },
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": [".post-content"]
  },
  "isAccessibleForFree": "True",
  "hasPart": {
    "@type": "WebPageElement",
    "isAccessibleForFree": "True",
    "cssSelector": ".post-content"
  },
  "copyrightYear": "{{ page.date | date: '%Y' }}",
  "copyrightHolder": {
    "@type": "Organization",
    "name": "{{ site.title }}"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.5",
    "reviewCount": "1",
    "bestRating": "5",
    "worstRating": "1"
  }
}
</script>

<!-- BreadcrumbList Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site.url }}"
    },
    {%- if page.category -%}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ page.category }}",
      "item": "{{ site.url }}/category/{{ page.category | slugify }}"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ page_title | escape | truncate: 50 }}",
      "item": "{{ page_url }}"
    }
    {%- else -%}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ page_title | escape | truncate: 50 }}",
      "item": "{{ page_url }}"
    }
    {%- endif -%}
  ]
}
</script>
{% else %}
<!-- Website/Organization Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.title }}",
  "alternateName": "Bhaskar Daily News",
  "description": "{{ site.description }}",
  "url": "{{ site.url }}",
  "inLanguage": ["en-IN", "hi-IN"],
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ site.url }}/search?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.url }}/assets/images/logo.png",
      "width": 250,
      "height": 60
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "{{ site.email | default: 'contact@kbhaskar.tech' }}",
      "contactType": "Customer Service",
      "availableLanguage": ["English", "Hindi"]
    },
    "sameAs": [
      "https://github.com/{{ site.github_username | default: 'kundan007b' }}"
    ]
  }
}
</script>

<!-- Organization Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "{{ site.title }}",
  "alternateName": "Bhaskar Daily News",
  "url": "{{ site.url }}",
  "logo": "{{ site.url }}/assets/images/logo.png",
  "description": "{{ site.description }}",
  "email": "{{ site.email | default: 'contact@kbhaskar.tech' }}",
  "foundingDate": "2025",
  "foundingLocation": {
    "@type": "Place",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "IN"
    }
  },
  "areaServed": {
    "@type": "Place",
    "name": "Worldwide"
  },
  "knowsLanguage": ["en-IN", "hi-IN"],
  "publishingPrinciples": "{{ site.url }}/privacy-policy/",
  "sameAs": [
    "https://github.com/{{ site.github_username | default: 'kundan007b' }}"
  ]
}
</script>
{% endif %}
